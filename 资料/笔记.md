# 笔记
- jrebel激活服务器https://jrebel.com.cn/#/

## 服务列表
- 虚拟机192.168.100.130
  - 账号root 密码gupao
  - 数据库3306
    - 账号root 密码123456
  - Nacos http://192.168.100.130:8848/nacos
    - 账号nacos
    - 密码nacos
  - canal 192.168.100.130:11111
- 虚拟机192.168.100.131
  - ceph
    - RGW访问 http://192.168.100.131:7480/
    - authUrl: http://192.168.100.131:7480/auth/1.0 #接口访问路径
    - 管理界面 http://192.168.100.131:9001/#/rgw/user
    - 图片路径:cephurl: http://localhost:8082/file/download/ {filename}
- 虚拟机192.168.100.132
  - ceph的仪表盘 https://192.168.100.132:8443/#/dashboard 
- 虚拟机192.168.100.133
## 环境

## 第一章

### Sentinel
- 用于熔断降级
- 和hystrix区别
- 流量控制,请求有顺序访问后端
- 直接限流:直接丢弃
- 冷启动?
- 排队:多余请求进入队列
- 熔断降级 
- 调用链错误

### RESTful编程风格
- code
- data
- message

## 第二章

### ceph

### MybatisPlus代码生成器

## 第三章

### OpenResty

### NGINX

### LUA脚本语法

### 添加redis缓存
1. spring配置类开启缓存
2. 类上添加缓存注解,使用缓存的命名空间来分类
3. key使用spring支持的spel表达式来获取
4. 类的返回值需实现序列化接口
5. 
### NGINX添加缓存

### 缓存一致性canal
- 端口192.168.100.130:11111
- canal解析mysql日志
- canal微服务消费canal解析后的信息
- ![img.png](img.png)
- 原理:基于mysql的主从复制,canal把自己模拟成mysql数据库节点
- 实现:
  - 添加监听类
  - spring启动类扫包


## 第四章 ElasticSearch搜索
- [Spring Data Elasticsearch](https://spring.io/projects/spring-data-elasticsearch)
- [全文搜索引擎 Elasticsearch 入门教程 - 阮一峰的网络日志](https://ruanyifeng.com/blog/2017/08/elasticsearch.html)
### 安装ElasticSearch全文搜索引擎 
- es-head已装好，端口9100,9200
- 192.168.100.130:9100可以查看索引内容
### ElasticSearch实现索引的删除和增加
- mapper
- service
- controller
- 添加feign接口,以便于代码调用
- 不显示索引内容
- 因为[elasticsearch 6以上 增加了请求头严格校验的原因](https://blog.csdn.net/Crazy_Cw/article/details/122302650)
``` bash
docker cp 6029d6556ebb:/usr/src/app/_site/vendor.js ./
docker cp vendor.js 6029d6556ebb:/usr/src/app/_site

```

### canal实现缓存索引数据实时更新

### 商品关键词搜索
- 关键词用keywords来接收,怎么接收,响应数据用什么对象封装
- 用map接收,响应数据用map封装
### 根据符合的商品进行分组查询,实现商品搜索条件回显
- 实现前端没有传入分类或品牌时,会返回所有的分类或品牌供用户选择
### 根据查询条件动态显示商品属性
- 把skuAttribute解析成map
- skuAttribute不进行分词,分词后拆碎了
- 前端查询商品的参数要求
  1、分类参数:category
  2、品牌参数:brand
  3、价格参数:price
  4、属性参数:attr_属性名：属性值
  5、分页参数:page

### 高亮搜索的关键词
- 对搜索到的结果集进行关键词替换为带样式的关键词
- 使用css样式实现高亮

## 第五章


### 1、搜索页面Thymeleaf渲染实战**
- 页面后端渲染  
	1)商品搜索页模板渲染
	2)搜索页条件搜索实现
- 商品名字展示标签换成th:utext即可,这样就能识别html标签了。
- 传参使用url
- th:href用法 
  - `th:href="@{${#strings.replace(url,'price='+searchMap.price,'')}}"`
  - `th:href="@{'/web/search'(age=123,name='wangwu'}"`
- 分页实现过程



**2、商品详情页静态化处理**

	1)商品详情页静态化
    - 查询3级分类,sku,spu   

	2)Vue+Thymeleaf静态页属性切换



**3、静态页实时更新**

	1)Canal实时监听数据库变更

	2)实时更新静态页
  - TODO 页面响应式布局,手机端,自动生成?
  - nosql存储评论
  - 聊天功能的实现,前端页面如何实时响应,websocket?
  - 报表统计
  - 数据插入
  - 前端图片上传显示预览,纯前端完成
  - 邮件验证
  - 短信验证
  - 扫码登录
  - 网关令牌机制
  - 富文本编辑器调开源
## 第六章
- MongoDB实现购物车功能